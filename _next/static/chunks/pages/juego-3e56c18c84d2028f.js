(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[278],{5862:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/juego",function(){return t(749)}])},1582:function(e,n,t){"use strict";t.d(n,{h:function(){return c}});var s=t(5893),r=t(1664),a=t.n(r),o=t(6194),i=t.n(o);let c=e=>{let{}=e;return(0,s.jsx)(a(),{href:"/",className:i().comeBackArrow,children:"⬅"})}},6661:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var s=t(5893),r=t(7659),a=t.n(r);let o=()=>(0,s.jsx)("div",{className:a().spinnerLoaderContainer,children:(0,s.jsx)("span",{className:a().spinnerLoader})});var i=t(7357),c=t.n(i),l=t(7294);function d(){let[e,n]=(0,l.useState)(0);return(0,l.useEffect)(()=>{n(1)},[]),(0,s.jsx)("div",{className:c().fullscreenLoader,style:{opacity:e},children:(0,s.jsx)(o,{})})}},6549:function(e,n,t){"use strict";t.d(n,{L:function(){return s}});let s="https://cryptotruco.com:443"},749:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return P}});var s=t(5893),r=t(4716),a=t.n(r),o=t(9008),i=t.n(o),c=t(7281),l=t.n(c),d=t(7294),u=t(1582),m=t(9367),x=t(6549),h=t(1163),p=t(929),g=t(6661),_=t(4051),j=t.n(_);let C=e=>{let{onClick:n}=e;return(0,s.jsx)("a",{className:j().plusSign,onClick:n,children:"➕"})};var v=t(5675),f=t.n(v),b=t(7951),N=t.n(b);let S=e=>{let{cancel:n,create:t}=e,[r,a]=(0,d.useState)("-100vh"),[o,i]=(0,d.useState)("0"),[c,l]=(0,d.useState)(!1),[u,m]=(0,d.useState)(!0),[x,h]=(0,d.useState)(!1);(0,d.useEffect)(()=>{a("0vh")},[]);let g=e=>{let n=e.target.value;if(+n>200){(0,p.Rr)("No se puede apostar m\xe1s de 200 \uD83D\uDE4F\uD83C\uDFFC",2500,"masde200"),i("200");return}if(0>+n){i("0");return}i(n.replace(/^0+(?!$)/,""))},_=()=>{a("-100vh"),setTimeout(n,350)};return(0,s.jsxs)("div",{className:N().creating,style:{top:r},children:[(0,s.jsx)("h2",{children:"Crear Partida"}),(0,s.jsxs)("div",{className:N().option,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"radio",value:c?"con":"sin",checked:!c,name:"flor",onChange:()=>{l(!1)}}),(0,s.jsx)("span",{children:"SIN FLOR"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"radio",value:c?"con":"sin",checked:c,name:"flor",onChange:()=>{l(!0)}}),(0,s.jsx)("span",{children:"CON FLOR"})]})]}),(0,s.jsxs)("div",{className:N().option,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"radio",name:"buenas",checked:u,value:u?"con":"sin",onChange:()=>m(!0)}),(0,s.jsx)("span",{children:"15 Buenas y 15 Malas"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"radio",name:"buenas",checked:!u,value:u?"con":"sin",onChange:()=>m(!1)}),(0,s.jsx)("span",{children:"18 Totales"})]})]}),(0,s.jsxs)("div",{className:N().option,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"radio",checked:!x,name:"coin",value:x?"USDC":"USDT",onChange:()=>h(!1)}),(0,s.jsx)(f(),{width:36,height:36,src:"/usdt.png",alt:"USDT"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"radio",checked:x,name:"coin",value:x?"USDC":"USDT",onChange:()=>h(!0)}),(0,s.jsx)(f(),{width:36,height:36,src:"/usdc.png",alt:"USDC"})]}),(0,s.jsx)("input",{type:"number",value:o,onChange:g})]}),(0,s.jsx)("div",{className:N().separator}),(0,s.jsx)("button",{onClick:()=>{t(c,u,x,+o)},children:"Crear partida"}),(0,s.jsx)("button",{onClick:_,children:"Cancelar"})]})};var k=function(e,n){(0,d.useEffect)(()=>{let t=t=>{!e.current||e.current.contains(t.target)||n(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[e,n])};let D=e=>{let{game:n,isOwnGame:t,cancelGame:r,startGame:a}=e,[o,i]=(0,d.useState)(!1),[c,u]=(0,d.useState)(!1),m=(0,d.useRef)(null),x=e=>{t?u(!c):i(!o)};return k(m,()=>{u(!1),i(!1)}),(0,s.jsx)("div",{className:l().gameContainer,onClick:x,ref:m,tabIndex:1,style:{background:o?"rgba(0,0,255,0.1)":c?"rgba(255,0,0,0.1)":t?"rgba(0,255,0,0.1)":"rgba(0, 0, 0, 0.1)"},children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Aceptas jugar contra ",n.creatorName," por ",n.amount," ",n.isUSDC?"USDC":"USDT","?"]}),(0,s.jsx)("button",{onClick:a,style:{backgroundColor:"rgba(0,255,0,0.2)"},children:"JUGAR"}),(0,s.jsx)("button",{style:{backgroundColor:"rgba(255,0,0,0.2)"},children:"Cancelar"})]}):c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"Deseas cancelar tu partida?"}),(0,s.jsx)("button",{onClick:r,style:{backgroundColor:"rgba(150,0,0,0.2)"},children:"Cancelar"}),(0,s.jsx)("button",{style:{backgroundColor:"rgba(50,0,0,0.2)"},children:"No cancelar"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:l().bold,children:n.creatorName}),(0,s.jsxs)("span",{children:["\uD83D\uDC49\uD83C\uDFFC ",n.flor?"Con flor":"Sin flor"]}),(0,s.jsxs)("span",{children:["\uD83D\uDC49\uD83C\uDFFC ",n.buenas?"15 Malas y 15 Buenas":"18 Totales"]}),(0,s.jsxs)("div",{className:l().coin,children:[(0,s.jsxs)("span",{className:l().bold,children:["$",n.amount]}),(0,s.jsx)(f(),{alt:n.isUSDC?"USDC":"USDT",src:n.isUSDC?"/usdc.png":"/usdt.png",width:30,height:30})]}),t&&(0,s.jsx)("span",{className:l().waiting,children:"Esperando que un jugador se una..."})]})})};var y=t(3719),w=t.n(y),L=t(5737),E=t.n(L);let U=e=>{let{card:n}=e;return(0,s.jsx)("div",{className:E().cardComponent,children:(0,s.jsx)(f(),{width:150,height:250,src:"/cartas/".concat(n,".png"),alt:n})})},F=e=>{let{game:n,socket:t,cards:r}=e,[a,o]=(0,d.useState)("");(0,d.useEffect)(()=>{console.log("game cambi\xf3!",n)},[n]);let i=e=>{o(e),null==t||t.emit("rockPaperScissors",{room:n.room,which:e})};return(0,s.jsxs)("div",{className:w().playing,children:[(0,s.jsx)("h2",{children:"Partida"}),(0,s.jsx)("p",{children:n.creatorName}),(0,s.jsx)("p",{children:n.joinedName}),!r&&a&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:["Jugaste ",a,"..."]}),n.whosNext&&(0,s.jsxs)("div",{children:[n.whosNext," empieza!"]})]}),!r&&!a&&(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:()=>i("rock"),children:"PIEDRA"}),(0,s.jsx)("button",{onClick:()=>i("paper"),children:"PAPEL"}),(0,s.jsx)("button",{onClick:()=>i("scissors"),children:"TIJERA"})]}),(0,s.jsx)("div",{className:w().cardsContainer,children:r&&r.map(e=>(0,s.jsx)(U,{card:e},e))})]})};function P(){let e=(0,h.useRouter)(),[n,t]=(0,d.useState)(null),[r,o]=(0,d.useState)(""),[c,_]=(0,d.useState)(!0),[j,v]=(0,d.useState)(!1),[f,b]=(0,d.useState)(!1),[N,k]=(0,d.useState)({}),[y,w]=(0,d.useState)(null),[L,E]=(0,d.useState)(null),U=(0,d.useRef)(!0);(0,d.useEffect)(()=>{var n;let s=null!==(n=localStorage.getItem("loggedUser"))&&void 0!==n?n:"";if(!s){e.replace("/");return}let r=(0,m.io)(x.L,{withCredentials:!0});return setTimeout(()=>{U.current&&(localStorage.setItem("loggedUser",""),(0,p.Rr)("No pudimos conectarnos, inicia sesi\xf3n nuevamente",4e3,"socketNo"),e.push("/"))},6500),r.on("connect",()=>{console.log("connected!"),U.current=!1,_(!1),t(r)}),r.on("username",e=>{localStorage.setItem("loggedUser",e),o(e)}),r.on("gamesAvailable",e=>{console.log("gamesAvailable!",e),k(e),b(Object.keys(e).includes(r.id))}),r.on("message",e=>{(0,p.Rr)(e,5e3,"serverInfo")}),r.on("updateGame",e=>{_(!1),w(e)}),r.on("cards",e=>{E(e)}),r.on("disconnect",n=>{e.replace("/")}),()=>{r.disconnect()}},[]);let P=(e,t,s,r)=>{let a={flor:e,buenas:t,isUSDC:s,amount:r};console.log("datos new game",a),null==n||n.emit("createGame",a),v(!1)};return(0,s.jsxs)("main",{className:"".concat(l().main," ").concat(a().className),children:[(0,s.jsx)(i(),{children:(0,s.jsx)("title",{children:"CryptoTruco | Juego"})}),c&&(0,s.jsx)(g.Z,{}),(0,s.jsx)("div",{className:"".concat(l().container," ").concat(l().juego),children:n&&(0,s.jsx)(s.Fragment,{children:y?(0,s.jsx)(F,{socket:n,game:y,cards:L}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.h,{}),!f&&(0,s.jsx)(C,{onClick:()=>{v(!0)}}),j&&(0,s.jsx)(S,{create:P,cancel:()=>v(!1)}),(0,s.jsx)("div",{className:l().topName,children:r}),(0,s.jsx)("div",{className:l().subtitle,children:"⬇️ Partidas disponibles ⬇️"}),(0,s.jsx)("div",{className:l().gamesContainer,children:Object.entries(N).map(e=>{let[t,a]=e;return(0,s.jsx)(D,{game:a,isOwnGame:a.creatorName===r,cancelGame:()=>{null==n||n.emit("cancelGame")},startGame:()=>{_(!0),null==n||n.emit("joinGame",{game:a,gameSocketId:t})}},a.creatorName)})})]})})})]})}},929:function(e,n,t){"use strict";t.d(n,{Jc:function(){return r},Qm:function(){return a},Rr:function(){return o}});var s=t(2920);let r=(e,n,t)=>{s.Am.error(e,{position:"bottom-center",hideProgressBar:!0,pauseOnHover:!0,draggable:!1,toastId:t,autoClose:n,theme:"colored"})},a=(e,n,t)=>{s.Am.success(e,{position:"bottom-center",hideProgressBar:!0,pauseOnHover:!0,draggable:!1,toastId:t,autoClose:n,theme:"colored"})},o=(e,n,t)=>{s.Am.info(e,{position:"bottom-center",hideProgressBar:!0,pauseOnHover:!0,draggable:!1,toastId:t,autoClose:n,theme:"colored"})}},5737:function(e){e.exports={cardComponent:"Card_cardComponent__yqkr8"}},6194:function(e){e.exports={comeBackArrow:"ComeBackArrow_comeBackArrow__1reX5"}},7951:function(e){e.exports={creating:"Creating_creating___bEgS",option:"Creating_option__go9Bk",separator:"Creating_separator__n7lXQ"}},7357:function(e){e.exports={fullscreenLoader:"FullscreenLoader_fullscreenLoader__n7EOc"}},7659:function(e){e.exports={spinnerLoaderContainer:"Loader_spinnerLoaderContainer__fln43",spinnerLoader:"Loader_spinnerLoader__KV8D7","spinner-rotation":"Loader_spinner-rotation__YKUiz"}},3719:function(e){e.exports={playing:"Playing_playing__GvrCt",cardsContainer:"Playing_cardsContainer__r8_aB"}},4051:function(e){e.exports={plusSign:"StartGamePlus_plusSign__qVaQA"}},7281:function(e){e.exports={main:"index_main__NvCNi",container:"index_container__twYoi",button:"index_button___5BsU",signInput:"index_signInput__x7dnO",separator:"index_separator__MFcYy",registerBtn:"index_registerBtn__hLPzF",juego:"index_juego__vgT_U",topName:"index_topName__0rc7t",subtitle:"index_subtitle__hpMKF",gamesContainer:"index_gamesContainer__ssyzo",gameContainer:"index_gameContainer__M_S1K",bold:"index_bold__19udO",coin:"index_coin__eZW80",waiting:"index_waiting__QD1FD",fade:"index_fade__VJjcV",inputTitle:"index_inputTitle__lqWQb",question:"index_question__lMQrt"}}},function(e){e.O(0,[640,436,774,888,179],function(){return e(e.s=5862)}),_N_E=e.O()}]);